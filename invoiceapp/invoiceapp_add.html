<template bind>
    <template if="{{Invoice.InvoiceNo}}"><!-- display Invoice.InvoiceNo, if provided -->
      <h3>Invoice #{{Invoice.InvoiceNo}}</h3>
    </template>

    <template if="{{!Invoice.InvoiceNo}}"><!-- if Invoice.InvoiceNo not provided, display new invoice heading -->
      <h3>Add new invoice</h3>
    </template>

    <div class="invoiceSubtitle">
      <label>Name</label>
      <input type="text" value="{{Invoice.Name$}}"/><!-- display Name$ and bind it for editing -->
    </div>

    <table class="invoiceTable">

      <thead>
      <tr>
        <th>Description</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
      </thead>

      <tbody>
      <template repeat="{{ item in Invoice.Items }}"><!-- iterate over Invoice.Items array elements to render the invoice rows -->
        <tr>
          <td><input type="text" value="{{item.Description$}}"/></td><!-- display Description$ and bind it for editing -->
          <td><input update-on="input" type="number" value="{{item.Quantity$}}"/></td><!-- display Quantity$ and bind it for editing -->
          <td><input update-on="input" type="number" value="{{item.Price$}}"/></td><!-- display Price$ and bind it for editing -->
          <td class="readonlycell alignright">{{item.Total}}</td><!-- display Total -->
        </tr>
      </template>
      </tbody>

      <tfoot>
      <tr>
        <td colspan="3"></td>
        <td class="total">{{Invoice.Total}}</td>
      </tr>
      </tfoot>

      <caption>
        <button onclick="getModel(this).Invoice.AddRow$++">Add row</button><!-- trigger AddRow$ handler -->
        <button onclick="getModel(this).Invoice.Save$++">Save changes</button><!-- trigger Save$ handler -->
        <button onclick="getModel(this).Invoice.Cancel$++">Cancel changes</button><!-- trigger Cancel$ handler -->
        <button onclick="getModel(this).Invoice.Delete$++">Delete invoice</button><!-- trigger Delete$ handler -->
      </caption>

    </table>
</template>
